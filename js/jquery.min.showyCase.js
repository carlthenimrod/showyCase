(function(b,r,s,q){"function"!==typeof Object.create&&(Object.create=function(a){function b(){}b.prototype=a;return new b});b.plugin=function(a,c){b.fn[a]=function(d){return this.each(function(){b.data(this,a)||b.data(this,a,Object.create(c).init(d,this))})}};b.plugin("showyCase",{init:function(a,c){var d=this;d.config=b.extend({},d.defaults,a);d.elem=c;d.$elem=b(c);b.when(d.load()).then(function(){b.when(d.build()).then(function(){d.events();d.modules.ctn.fadeIn(d.config.speedLoad)},function(){alert("Error: Failed to build HTML.")})},
function(){alert("Error: Failed to load data.")});return d},defaults:{ajaxCache:!1,ajaxDataType:"json",ajaxDataUrl:"json/jquery.items.json",classCtn:"sc-ctn",classCtrl:"sc-ctrl",classPrev:"sc-prev",classNext:"sc-next",classThumbs:"sc-thumbs",onItemClick:!1,html5:!0,pageShow:18,pageStart:0,pathFull:!1,pathRoot:"img/",pathThumbs:"img/thumbs/",speedLoad:300,speedTransition:150},load:function(){var a=this,c=b.Deferred();b.ajax({cache:a.config.ajaxCache,dataType:a.config.ajaxDataType,url:a.config.ajaxDataUrl}).then(function(b){a.data=
b.items;a.items=a.utils.findAllItems(a.data);c.resolve()},function(){c.reject()});return c.promise()},build:function(){var a=this,c=b.Deferred();b.when(a.render()).then(function(){a.$elem.fadeIn(a.config.speedLoad,function(){c.resolve()})},function(){c.reject()});return c.promise()},events:function(){var a=this;a.modules.ctrlPrev.on("click",function(){if((!a.animating||"pending"!==a.animating.state())&&0!==a.pages.current)--a.pages.current,a.eventRefreshThumbs()});a.modules.ctrlNext.on("click",function(){if((!a.animating||
"pending"!==a.animating.state())&&a.pages.current!==a.pages.total-1)++a.pages.current,a.eventRefreshThumbs()});a.modules.thumbs.on("hover","li",function(){a.eventCreatePopUp()});a.modules.thumbs.on("click","li",function(c){a.eventClick(b(this));c.preventDefault()})},eventCreatePopUp:function(){},eventClick:function(a){"blurbGallery"==this.config.onImgClick?(a=this.utils.formatText(a.find("a").attr("title")),window.location.href="gallery.php?selected="+a):window.location.href=a.find("a").attr("href")},
eventRefreshThumbs:function(){var a=this,c,d,f,h,g=[],j,l,e;a.animating=b.Deferred();a.modules.thumbs.fadeOut(a.config.speedTransition,function(){a.modules.thumbs.empty();j=a.pages.current*a.pages.show;l=j+a.pages.show;e=a.items.slice(j,l);c=b("<ul>");var k,m,p,n;k=0;for(m=e.length;k<m;++k)n=a.config.pathThumbs?a.config.pathThumbs+e[k].img:a.config.pathRoot+e[k].img,p=a.config.pathRoot+e[k].img,d=b("<li>"),h=b("<a/>",{alt:e[k].title,title:e[k].title}).attr("href",p),f=b("<img/>",{alt:e[k].title,title:e[k].title}).attr("src",
n),h.append(f),d.append(h),c.append(d),g.push(n);a.utils.preload(g).done(function(){a.modules.thumbs.append(c);a.modules.thumbs.fadeIn(a.config.speedTransition,function(){a.animating.resolve()})})})},render:function(){var a=[],c=b.Deferred();this.modules={};a.push(this.renderContainer());a.push(this.renderControls());a.push(this.renderThumbs());b.when.apply(this,a).then(function(){c.resolve()},function(){c.reject()});return c.promise()},renderContainer:function(){this.modules.ctn=this.config.html5?
b("<section>"):b("<div>");this.modules.ctn.attr({"class":this.config.classCtn});this.$elem.append(this.modules.ctn)},renderControls:function(){this.modules.ctrl=this.config.html5?b("<section>"):b("<div>");this.modules.ctrl.attr({"class":this.config.classCtrl});this.modules.ctrlPrev=b("<div>",{alt:"Previous","class":this.config.classPrev,title:"Previous"});this.modules.ctrlNext=b("<div>",{alt:"Next","class":this.config.classNext,title:"Next"});this.modules.ctrl.append(this.modules.ctrlPrev);this.modules.ctrl.append(this.modules.ctrlNext);
this.modules.ctn.append(this.modules.ctrl)},renderThumbs:function(){var a=this,c=b.Deferred(),d,f,h,g,j=[],l;a.createPages();f=a.pages.current*a.pages.show;l=a.items.slice(f,f+a.pages.show);a.modules.thumbs=a.config.html5?b("<nav>"):b("<div>");a.modules.thumbs.attr({"class":a.config.classThumbs});a.modules.ctn.append(a.modules.thumbs);d=b("<ul>");var e,k,m;e=0;for(k=l.length;e<k;++e)m=a.config.pathThumbs?a.config.pathThumbs+l[e].img:a.config.pathRoot+l[e].img,h=a.config.pathRoot+l[e].img,f=b("<li>"),
g=b("<a/>",{alt:l[e].title,title:l[e].title}).attr("href",h),h=b("<img/>",{alt:l[e].title,title:l[e].title}).attr("src",m),g.append(h),f.append(g),d.append(f),j.push(m);a.utils.preload(j).done(function(){a.modules.thumbs.append(d);c.resolve()});return c.promise()},createPages:function(){this.pages={current:this.config.pageStart,show:this.config.pageShow,count:this.items.length,total:q};this.pages.total=Math.ceil(this.pages.count/this.pages.show)},utils:{findAllItems:function(a){var b,d,f,h=[];b=0;
for(d=a.length;b<d;++b){f=a[b].item;for(var g=void 0,j=void 0,g=0,j=f.length;g<j;++g)h.push(f[g])}return h},formatText:function(a){a=a.toLowerCase();a=a.replace(/ /g,"_");a=a.replace(/&/g,"and");return a=a.replace(/[^a-z0-9_]/g,"")},preload:function(a){var c=b.Deferred(),d=[],f,h,g;b.isArray(a)||(a=[a]);h=a.length;for(var j=0;j<h;j++)g=b.Deferred(),f=b("<img />"),f.load(g.resolve),f.error(g.resolve),d.push(g),f.get(0).src=a[j];b.when.apply(this,d).done(c.resolve);return c.promise()}}})})(jQuery,window,
document);